import java.util.*;

public class TrickTest {

    public static void main(String arg[]) {

    }

    // åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— https://leetcode.cn/problems/single-number/description/?envType=study-plan-v2&envId=top-100-liked
    public int singleNumber(int[] nums) {
        // å¼‚æˆ– 2m + 1ä¸ªæ•° ï¼ˆå¼‚æˆ–æ˜¯è½¬æˆ2è¿›åˆ¶è®¡ç®—ğŸŒŸï¼‰
        // ï¼ˆa1 ^ a1ï¼‰^ (a2 ^ a2 ) ... ^ am+1 = 0 ^ 0 ^ 0 ^ am+1 = am+1
        int result = 0;
        for (int num : nums) {
            result ^= num;
        }
        return result;
    }

    // å¤šæ•°å…ƒç´  https://leetcode.cn/problems/majority-element/?envType=study-plan-v2&envId=top-100-liked
    public int majorityElement(int[] nums) {
        Arrays.sort(nums);
        return nums[nums.length / 2];
    }

    // é¢œè‰²åˆ†ç±» https://leetcode.cn/problems/sort-colors/description/?envType=study-plan-v2&envId=top-100-liked
    public void sortColors(int[] nums) {
        // ğŸŒŸ ç‰¹å®šæŒ‡é’ˆï¼šç”¨äºäº¤æ¢
        int ptr = 0;
        // ç¬¬ä¸€æ¬¡éå†æŠŠæ‰€æœ‰0çš„ä½ç½®å å¥½
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] == 0) {
                // å’Œå½“å‰pträ½ç½®äº¤æ¢
                int temp = nums[ptr];
                nums[ptr] = nums[i];
                nums[i] = temp;
                ptr++;
            }
        }
        // ç¬¬äºŒæ¬¡éå†æŠŠæ‰€ä»¥1çš„ä½ç½®å å¥½
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] == 1) {
                // å’Œå½“å‰pträ½ç½®äº¤æ¢
                int temp = nums[ptr];
                nums[ptr] = nums[i];
                nums[i] = temp;
                ptr++;
            }
        }
        // å‰©ä¸‹çš„2å°±å·²ç»åœ¨æ•°ç»„å°¾éƒ¨äº†
    }

    // å¯»æ‰¾é‡å¤æ•° https://leetcode.cn/problems/find-the-duplicate-number/description/?envType=study-plan-v2&envId=top-100-liked
    public int findDuplicate(int[] nums) {
        // æŠŠæ•°ç»„çœ‹ä½œé“¾è¡¨
        // æŠŠnum[i]çš„å€¼å½“ä½œé“¾è¡¨nextï¼Œå³nextå°±æ˜¯ nums[å‰ä¸€ä¸ªnums[i]]çš„å€¼
        // æ‰€ä»¥è¿™æ ·ä¸€å®šä¼šæœ‰ç¯ï¼Œç”¨å¿«æ…¢æŒ‡é’ˆè§£å†³
        // egï¼š    [1 3 4 2 2]
        // index    0 1 2 3 4
        // é“¾è¡¨ï¼š 1(nums[0]) -> 3 (nums[1]) -> 2(nums[3]) -> 4(nums[2]) -> 2(nums[4]) -> 4(nums[2])


        /*
         * ğŸŒŸ æ ¸å¿ƒæ€æƒ³ï¼šå°†æ•°ç»„çœ‹ä½œé“¾è¡¨ï¼Œåˆ©ç”¨Floydåˆ¤åœˆç®—æ³•æ‰¾ç¯çš„å…¥å£
         *
         * å…³é”®è§‚å¯Ÿï¼š
         * - æ•°ç»„ç´¢å¼•ï¼š0, 1, 2, ..., n
         * - æ•°ç»„å€¼ï¼šnums[0], nums[1], ..., nums[n]
         * - å°† nums[i] çœ‹ä½œæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ
         * - å› ä¸ºæœ‰é‡å¤æ•°å­—ï¼Œæ‰€ä»¥ä¼šå½¢æˆç¯
         */

        // ========== é˜¶æ®µ1ï¼šæ‰¾ç¯çš„ç›¸é‡ç‚¹ ==========
        int slow = nums[0];  // æ…¢æŒ‡é’ˆä»ç´¢å¼•0å¼€å§‹
        int fast = nums[0];  // å¿«æŒ‡é’ˆä¹Ÿä»ç´¢å¼•0å¼€å§‹

        // ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šæ‰¾ç›¸é‡ç‚¹
        while (true) {
            slow = nums[slow];        // æ…¢æŒ‡é’ˆï¼šèµ°1æ­¥
            fast = nums[nums[fast]];  // å¿«æŒ‡é’ˆï¼šèµ°2æ­¥

            if (slow == fast) {
                break;  // ç›¸é‡äº†ï¼Œè¯´æ˜æœ‰ç¯
            }
        }

        // è®¾ï¼š
        //  - a = èµ·ç‚¹åˆ°ç¯å…¥å£çš„è·ç¦»
        // - b = ç¯å…¥å£åˆ°ç›¸é‡ç‚¹çš„è·ç¦»
        // - L = ç¯çš„é•¿åº¦

        // é˜¶æ®µ1ç»“æŸæ—¶ï¼š
        // - æ…¢æŒ‡é’ˆèµ°äº†ï¼ša + b æ­¥
        // - å¿«æŒ‡é’ˆèµ°äº†ï¼ša + b + nL æ­¥ï¼ˆnæ˜¯å¿«æŒ‡é’ˆå¤šèµ°çš„åœˆæ•°ï¼‰
        // ğŸŒŸ å› ä¸º å¿«æŒ‡é’ˆæ­¥æ•°æ˜¯æ…¢æŒ‡é’ˆ 2å€ï¼Œæ‰€ä»¥  2ï¼ˆa + bï¼‰ = a + b + nL
        // --> a + b = nL  ï¼ˆnæ˜¯å¿«æŒ‡é’ˆå¤šèµ°çš„åœˆæ•°ï¼‰
        // --> a = nL - b

        // è¿™æ„å‘³ç€ï¼š
        // - ä»èµ·ç‚¹èµ° a æ­¥ â†’ åˆ°è¾¾ç¯å…¥å£
        // - ä»ç›¸é‡ç‚¹èµ° nL - b æ­¥ï¼ˆå³ a æ­¥ï¼‰ï¼ˆnl-bï¼ŒnlæŠµæ¶ˆæ‰ï¼Œ-bé€€å›å…¥å£ï¼‰â†’ ä¹Ÿåˆ°è¾¾ç¯å…¥å£

        // æ‰€ä»¥ï¼š
        // - ä¸€ä¸ªæŒ‡é’ˆä»èµ·ç‚¹èµ° a æ­¥
        // - å¦ä¸€ä¸ªæŒ‡é’ˆä»ç›¸é‡ç‚¹èµ° a æ­¥
        // - ä¸¤è€…ä¼šåœ¨ç¯å…¥å£ç›¸é‡ (æ‰€ä»¥éƒ½èµ°1æ­¥)


        // ========== é˜¶æ®µ2ï¼šæ‰¾ç¯çš„å…¥å£ï¼ˆé‡å¤æ•°å­—ï¼‰==========
        // é‡ç½®æ…¢æŒ‡é’ˆåˆ°èµ·ç‚¹
        slow = nums[0];
        // ç¬¬äºŒæ¬¡å¾ªç¯ï¼šæ‰¾ç¯å…¥å£
        while (slow != fast) {
            slow = nums[slow];  // æ…¢æŒ‡é’ˆï¼šèµ°1æ­¥
            fast = nums[fast];   // å¿«æŒ‡é’ˆï¼šä¹Ÿèµ°1æ­¥
        }
        return slow;
    }




    // ä¸‹ä¸€ä¸ªæ’åˆ— https://leetcode.cn/problems/next-permutation/solutions/479151/xia-yi-ge-pai-lie-by-leetcode-solution/?envType=study-plan-v2&envId=top-100-liked
    public void nextPermutation(int[] nums) {
        // è¿™ä¸ªé¢˜å°±ç›´æ¥èƒŒå§ã€‚ã€‚ã€‚ æˆ–è€…æ‰¾ä¸ªä¾‹å­ å†™ä¸€ä¸‹ eg ï¼š 231 --ã€‹ 312

        // å­—å…¸åºï¼šä»¥æ•°å­—åºåˆ— [1,2,3] ä¸ºä¾‹ï¼Œå…¶æ’åˆ—æŒ‰ç…§å­—å…¸åºä¾æ¬¡ä¸ºï¼š
        //[1,2,3]
        //[1,3,2]
        //[2,1,3]
        //[2,3,1]
        //[3,1,2]
        //[3,2,1]
        // å³ï¼šè¶Šé å·¦çš„æ•°å­—è¶Šå°è¶Šé å‰

        // é—®é¢˜è½¬æ¢
//        æƒ³è±¡ä½ åœ¨æŸ¥å­—å…¸ï¼Œæˆ–è€…çœ‹æ•°å­—ã€‚
//        æ¯”å¦‚ï¼š123 -> 132 -> 213 -> 231 -> 312 -> 321ã€‚
//        è¦æ‰¾â€œä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°â€ï¼Œä½†è¦â€œå¤§å¾—è¶Šå°‘è¶Šå¥½â€ï¼ˆç´§æŒ¨ç€çš„ä¸‹ä¸€ä¸ªï¼‰ã€‚
//        åŸåˆ™ï¼š
//        ï¼ˆ1ï¼‰å°½é‡æ”¹åŠ¨ä½ä½ï¼ˆé å³çš„æ•°ï¼‰ï¼šæ”¹åŠ¨è¶Šé å³ï¼Œå¢åŠ çš„å¹…åº¦è¶Šå°ã€‚
//        ï¼ˆ2ï¼‰æŠŠä¸€ä¸ªå°æ•°æ¢æˆå¤§æ•°ï¼šä¸ºäº†å˜å¤§ï¼Œå¿…é¡»æŠŠåé¢(å› ä¸ºæ˜¯ä»åå¾€å‰æ‰¾ï¼Œæ‰€ä»¥å…¶å®æ˜¯ åŸåºåˆ—çš„ â€œå‰é¢â€ )æŸä¸ªâ€œå¤§æ•°â€æ¢åˆ°å‰é¢æ¥ã€‚
//        ï¼ˆ3ï¼‰æ¢å®Œä¹‹åï¼Œåé¢è¦æœ€å°ï¼šé«˜ä½å˜å¤§äº†ä¸€ç‚¹ç‚¹åï¼Œåé¢çš„ä½ä½å¿…é¡»å˜æˆå‡åºï¼ˆæœ€å°çŠ¶æ€ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ˜¯â€œä¸‹ä¸€ä¸ªâ€è€Œä¸æ˜¯â€œä¸‹ä¸‹ä¸ªâ€ã€‚


        // ç›®æ ‡1: å…ˆæŒ‰ä»å³å¾€å·¦ï¼Œæ‰¾ç¬¬ä¸€ä¸ªä¸æ˜¯ã€é™åºï¼ˆå› ä¸ºé™åºä¸€å®šæ˜¯ç›®å‰æœ€å¤§çš„caseï¼‰ã€‘çš„æ•°å­—
        int i = (nums.length - 1) - 1; // å³ä»å€’æ•°ç¬¬äºŒä¸ªå¼€å§‹æ¯”
        while (i >= 0 && nums[i] >= nums[ i + 1 ]) {
            i--;                                        // å¦‚æœä¸€ç›´æ²¡æ‰¾åˆ° iå°±æ˜¯-1ï¼Œè·³è¿‡ ç›®æ ‡2 ç›´æ¥reverse
        }
        // æ­¤æ—¶iå°±æ˜¯ç›®æ ‡è¦ã€å¢å¤§ï¼ˆç§»åˆ°åé¢ï¼‰ã€‘çš„æ•°å­—

        // ç›®æ ‡2: ç»§ç»­ä»å³å¾€å·¦æ‰¾ "å¤§äºnums[i]çš„æœ€å°çš„æ•°å­—"ï¼ˆå› ä¸ºå‰é¢å·²ç»åˆ¤æ–­äº†iå³è¾¹æ˜¯é™åºçš„ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„å°±æ˜¯ æ¯”nums[i]å¤§çš„æœ€å°å€¼ï¼‰ï¼Œä»è€Œç¡®ä¿å˜åŒ–æœ€å°ç”¨äºæ ¹nums[i]æ›¿æ¢
        if (i >= 0) {
            int j = nums.length - 1;
            while (nums[i] >= nums[j]) {
                j--;
            }
            swap(nums, i, j);
        }

        // ç›®æ ‡3: åè½¬ä¹‹å‰çš„ä»åå¾€å‰æ‰¾çš„é™åºåºåˆ—ï¼Œä½¿åŸæ¥çš„é™åºåºåˆ—ï¼ˆæœ€å¤§å€¼ï¼‰å˜æˆå‡åºåºåˆ—ï¼Œä»è€Œå˜æˆæ–°çš„æœ€å°åºåˆ—
        reverseArr(nums, i + 1, nums.length - 1);
    }

    private void swap(int[] nums, int i, int j) {
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }

    private void reverseArr(int[] nums, int start, int end) {
        while(start < end) {
            swap(nums, start, end);
            end--;
            start++;
        }
    }
}
